# 项目开发任务清单（implementation_checklist）

> 本文档按阶段、模块、任务拆分，细化为可执行 checklist，便于分工、追踪和协作。

---

## 阶段一：基础能力搭建

### 1.1 需求梳理与技术选型
- [ ] 明确 MVP 目标（文档中写明输入法模拟流程）
  - 验收标准：文档有详细输入法模拟流程说明
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 技术栈调研（windows-rs、Tauri、React、SQLite 兼容性）
  - 验收标准：docs/tech_stack.md 有调研结论
  - 负责人：
  - 预计工时：2h
  - 进度：0%
- [ ] 设计模块划分（画出模块依赖图）
  - 验收标准：docs/module_diagram.png
  - 负责人：
  - 预计工时：1h
  - 进度：0%

### 1.2 项目初始化
- [ ] 用 cargo 新建 Rust 项目
  - 验收标准：项目可编译
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%
- [ ] 新建各模块文件（windows_interop.rs、candidate_ui.rs、ai_client.rs、input_history.rs、config.rs、main.rs）
  - 验收标准：每个文件存在且有基本结构
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%
- [ ] 配置 Tauri 项目，能跑起来一个最简单的窗口
  - 验收标准：Tauri 窗口可弹出
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 配置 React 前端，能显示 hello world
  - 验收标准：前端页面可见
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 配置 SQLite，能读写一条 mock 数据
  - 验收标准：能插入/查询一条数据
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 记录所有初始化命令和遇到的问题到 docs/progress_log.md
  - 验收标准：文档有详细记录
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%

---

## 阶段二：核心功能开发

### 2.1 Windows 交互模块
- [ ] 用 windows-rs 获取当前聚焦窗口（demo 输出窗口标题）
  - 验收标准：能输出当前窗口标题
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 获取输入框内容（支持常见控件，写 demo）
  - 验收标准：能读取输入框内容
  - 负责人：
  - 预计工时：2h
  - 进度：0%
- [ ] 监听输入事件（hook 键盘，写 demo）
  - 验收标准：能捕获输入事件
  - 负责人：
  - 预计工时：2h
  - 进度：0%
- [ ] 操作输入框内容（插入、删除，写 demo）
  - 验收标准：能插入/删除内容
  - 负责人：
  - 预计工时：2h
  - 进度：0%
- [ ] 记录 API、兼容性问题到 docs/windows_interop.md
  - 验收标准：文档有详细记录
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%

### 2.2 候选词悬浮组件
- [ ] 用 Tauri/egui 创建悬浮窗（能随鼠标移动，能置顶）
  - 验收标准：悬浮窗可移动、置顶
  - 负责人：
  - 预计工时：2h
  - 进度：0%
- [ ] React/egui 显示 mock 候选词
  - 验收标准：能显示候选词
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 支持快捷键选择候选词（监听数字键、回车等）
  - 验收标准：能用快捷键选择
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 支持鼠标点击选择
  - 验收标准：能用鼠标选择
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 选择后能触发插入操作
  - 验收标准：选择候选词后能插入内容
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 记录 UI 设计稿、交互流程到 docs/candidate_ui.md
  - 验收标准：文档有设计稿
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%

### 2.3 AI 候选模块
- [ ] ai_client.rs 支持配置 API 地址
  - 验收标准：能配置 API 地址
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%
- [ ] 能异步请求 mock/真实 API
  - 验收标准：能切换 mock/真实
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 记录 API 协议、mock 数据格式到 docs/ai_client.md
  - 验收标准：文档有协议说明
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%

### 2.4 输入历史管理
- [ ] SQLite 建表（输入内容、时间、窗口等字段）
  - 验收标准：表结构设计合理
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%
- [ ] 能插入、查询历史
  - 验收标准：能插入/查询历史
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 提供查询接口给 AI
  - 验收标准：AI 能调用接口
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%
- [ ] 记录表结构、接口文档到 docs/input_history.md
  - 验收标准：文档有接口说明
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%

### 2.5 配置管理
- [ ] 支持热加载配置（监听文件变化）
  - 验收标准：配置变更能实时生效
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 能编辑配置文件（UI/文本）
  - 验收标准：能通过 UI/文本编辑配置
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 记录配置项说明到 docs/config.md
  - 验收标准：文档有配置项说明
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%

---

## 阶段三：功能集成与体验优化

### 3.1 主循环与事件驱动
- [ ] main.rs 初始化各模块
  - 验收标准：主循环能正常驱动
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 监听输入和窗口变化
  - 验收标准：能实时响应变化
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 驱动 UI 和 AI 更新
  - 验收标准：UI/AI 能同步更新
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 记录主循环流程图到 docs/main_loop.md
  - 验收标准：文档有流程图
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%

### 3.2 模拟输入法体验
- [ ] 输入内容后弹出候选窗
  - 验收标准：输入后能弹窗
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 选择候选词后自动替换输入内容
  - 验收标准：能自动替换
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 支持撤销、重做
  - 验收标准：能撤销/重做
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 记录用户体验流程到 docs/ux_flow.md
  - 验收标准：文档有流程说明
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%

### 3.3 插件机制预留
- [ ] 设计插件接口（trait/ts interface）
  - 验收标准：接口设计合理
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 插件能追加候选词
  - 验收标准：插件能扩展候选词
  - 负责人：
  - 预计工时：1h
  - 进度：0%
- [ ] 写一个拼音插件 demo
  - 验收标准：拼音插件能用
  - 负责人：
  - 预计工时：2h
  - 进度：0%
- [ ] 记录插件开发文档到 docs/plugin_dev_guide.md
  - 验收标准：文档有开发说明
  - 负责人：
  - 预计工时：0.5h
  - 进度：0%

---

## 阶段四：测试、文档与协作

### 4.1 功能测试
- [ ] 编写单元测试（每个模块）
  - 验收标准：测试覆盖主要逻辑
  - 负责人：
  - 预计工时：2h
  - 进度：0%
- [ ] 编写集成测试（主流程）
  - 验收标准：主流程可自动化测试
  - 负责人：
  - 预计工时：2h
  - 进度：0%
- [ ] 在常见输入框测试兼容性
  - 验收标准：兼容性报告
  - 负责人：
  - 预计工时：2h
  - 进度：0%
- [ ] 记录测试用例、兼容性报告到 docs/test_cases.md
  - 验收标准：文档有测试用例
  - 负责人：
  - 预计工时：1h
  - 进度：0%

### 4.2 协作文档
- [ ] draft.md 记录开发进度、问题、解决方案
  - 验收标准：文档持续更新
  - 负责人：
  - 预计工时：持续
  - 进度：0%
- [ ] 明确每个阶段负责人、时间节点、交付标准
  - 验收标准：docs/progress_log.md 有详细分工
  - 负责人：
  - 预计工时：1h
  - 进度：0%

### 4.3 后续计划
- [ ] 评估 TSF/IME 深度开发可行性
  - 验收标准：有调研结论
  - 负责人：
  - 预计工时：2h
  - 进度：0%
- [ ] 持续优化 UI/UX
  - 验收标准：有优化建议
  - 负责人：
  - 预计工时：持续
  - 进度：0%
- [ ] 完善插件和配置生态
  - 验收标准：插件/配置文档完善
  - 负责人：
  - 预计工时：持续
  - 进度：0%

---

> 如有遗漏或需补充，请随时在本文件补充细粒度 checklist。 

@startuml
package "ainput" {
  [main] --> [windows_interop]
  [main] --> [candidate_ui]
  [main] --> [ai_client]
  [main] --> [input_history]
  [main] --> [config]
  [main] --> [plugin]

  [candidate_ui] --> [config]
  [candidate_ui] --> [ai_client]
  [candidate_ui] --> [plugin]

  [ai_client] --> [config]
  [ai_client] --> [input_history]

  [plugin] --> [input_history]
  [plugin] --> [config]

  [windows_interop] --> [config]

  package "plugin" {
    [pinyin_plugin]
    [custom_plugin]
    [plugin] <|-- [pinyin_plugin]
    [plugin] <|-- [custom_plugin]
  }
}
@enduml 